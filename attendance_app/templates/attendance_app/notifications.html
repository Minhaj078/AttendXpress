{% extends 'attendance_app/base.html' %}
{% block title %}Notifications â€“ EduTrack{% endblock %}
{% block topbar_title %}Notifications{% endblock %}

{% block content %}
<div class="page-header">
  <div>
    <h1 class="page-title">Notifications</h1>
    <p class="page-subtitle">System alerts and updates</p>
  </div>
</div>

{% if notifications %}
<div style="display:flex;flex-direction:column;gap:10px">
  {% for notif in notifications %}
  <div class="card" style="{% if not notif.is_read %}border-left:3px solid var(--primary){% endif %}">
    <div class="card-body" style="padding:16px 20px;display:flex;align-items:flex-start;gap:14px">
      <div style="width:42px;height:42px;border-radius:50%;flex-shrink:0;display:flex;align-items:center;justify-content:center;font-size:1.1rem;
        {% if notif.notification_type == 'makeup_scheduled' %}background:rgba(99,102,241,.1);color:var(--primary)
        {% elif notif.notification_type == 'code_generated' %}background:rgba(245,158,11,.1);color:var(--accent)
        {% elif notif.notification_type == 'attendance_marked' %}background:rgba(16,185,129,.1);color:var(--success)
        {% elif notif.notification_type == 'ai_suggestion' %}background:rgba(139,92,246,.1);color:#7c3aed
        {% else %}background:rgba(59,130,246,.1);color:var(--info){% endif %}">
        {% if notif.notification_type == 'makeup_scheduled' %}<i class="fas fa-calendar-plus"></i>
        {% elif notif.notification_type == 'code_generated' %}<i class="fas fa-key"></i>
        {% elif notif.notification_type == 'attendance_marked' %}<i class="fas fa-clipboard-check"></i>
        {% elif notif.notification_type == 'ai_suggestion' %}<i class="fas fa-brain"></i>
        {% else %}<i class="fas fa-bell"></i>{% endif %}
      </div>
      <div style="flex:1">
        <div style="display:flex;justify-content:space-between;align-items:flex-start;flex-wrap:wrap;gap:4px">
          <div style="font-weight:700;font-size:.9rem">{{ notif.title }}</div>
          <div style="font-size:.75rem;color:var(--text-muted)">{{ notif.created_at|timesince }} ago</div>
        </div>
        <p style="font-size:.85rem;color:var(--text-muted);margin-top:4px;line-height:1.5">{{ notif.message }}</p>
        {% if notif.related_class %}
        <a href="{% url 'makeup_detail' notif.related_class.pk %}" class="btn btn-ghost btn-sm mt-2">
          <i class="fas fa-arrow-right"></i> View Class
        </a>
        {% endif %}
      </div>
    </div>
  </div>
  {% endfor %}
</div>
{% else %}
<div class="card">
  <div class="empty-state" style="padding:80px 24px">
    <i class="fas fa-bell-slash"></i>
    <p>No notifications yet</p>
    <p style="font-size:.8rem;margin-top:4px">You'll receive alerts when makeup classes are scheduled or when codes are activated</p>
  </div>
</div>
{% endif %}
{% endblock %}
